# BigInt C++ Library

Учебная библиотека для работы с целыми числами произвольной длины на C++. Предназначена для изучения работы с большими числами, алгоритмов умножения, деления, нахождения НОД, обратного числа по модулю и тестирования простоты. 

> **Внимание:** проект является учебным. Не предназначен для промышленного использования. Для очень больших чисел рекомендуется использовать GMP или другие оптимизированные библиотеки.

---

## Содержание

- [Особенности](#особенности)
- [Представление чисел](#представление-чисел)
- [Основные методы BigInt](#основные-методы-bigint)
- [Арифметика](#арифметика)
- [Функции из bigint_extra.h](#функции-из-bigint_extrah)
- [Примеры использования](#примеры-использования)
- [Ограничения](#ограничения)

---

## Особенности

- Поддержка целых чисел произвольной длины.
- База хранения числа: `BASE = 10^9` (по блокам).
- Арифметика с автоматическим выбором алгоритма умножения:
  - Простое умножение для небольших чисел.
  - FFT для больших чисел.
  - Karatsuba для очень больших чисел (лучше использовать GMP для огромных чисел).
- Binary GCD для быстрого вычисления НОД.
- Реализация EGCD и modular inverse.
- Пробные функции генерации случайных чисел и случайных простых чисел.
- Тесты простоты Миллера-Раббина для int32 и BigInt.
- Методы факторизации (только учебные, не оптимизированные для больших чисел).

---

## Представление чисел

- `bigint` хранит число как вектор `digits`, каждый элемент которого ≤ BASE.  
- Знак числа хранится отдельно.  
- Методы для работы с цифрами:
  - `isNegative()` — проверка знака числа.
  - `num_digits()` — количество цифр в числе.
  - `abs()` — модуль числа.
  - `to_string()` — конвертация числа в строку.
  - `sqrt()` — целочисленный квадратный корень.

---

## Основные методы BigInt

### Арифметика

- `operator+`, `operator-`, `operator*`, `operator/`, `operator%` — стандартная арифметика.
- `divmod(a, b)` — возвращает пару `(quotient, remainder)`; оптимизации:
  - Быстрое вычисление остатков при делении на 2, 5, 10.
- `gcd(a, b)` — вычисление НОД с помощью **Binary GCD**.
- `egcd(a, b)` — расширенный бинарный НОД; возвращает коэффициенты Безу и НОД.
- `modular_inverse(a, m)` — обратный элемент по модулю m (если существует).
- `pow_mod(base, exponent, modulus)` — быстрый возвод числа в степень по модулю.

### Умножение

- Сначала используется **простое умножение**.
- Для больших чисел переключается на **FFT**.
- Для очень больших чисел (с высокой точностью) может использоваться **Karatsuba**.
  > Для экстремально больших чисел лучше использовать GMP.

---

## Функции из `bigint_extra.h`

### Генерация случайных чисел

- `random_bigint()` — случайное большое число (пробная версия, медленная).
- `random_bigint(length)` — случайное число заданной длины.
- `random_prime_bigint()` — случайное простое число (пробная версия, медленная).
- `random_prime_bigint(n)` — случайное простое число с n блоками.

### Простейшие функции теории чисел

- `MillerRabbin(n)` — тест простоты Миллера-Раббина для `bigint`.
- `test_if_prime(a)` — проверка числа на простоту.
- `pow_mod(n, power, mod)` — возведение числа в степень по модулю.
- `factorisation` и `pollard_rho` — функции факторизации (только для учебного использования).

### Комбинаторика

- `factorial(n)` — факториал числа (int или bigint).
- `binomial(n, k)` — биномиальный коэффициент.
- `partperm(n, k)` — частичные перестановки.
- `fibonacci(n)` — вычисление n-го числа Фибоначчи.

---

## Примеры использования

```cpp
#include "bigint.h"
#include "bigint_extra.h"
#include <iostream>

int main() {
    bigint a("12345678901234567890");
    bigint b("98765432109876543210");

    // Арифметика
    bigint c = a + b;
    std::cout << "Sum: " << c.to_string() << "\n";

    // GCD и EGCD
    bigint g = gcd(a, b);
    auto eg = egcd(a, b);
    std::cout << "GCD: " << g.to_string() << "\n";

    // Modular inverse
    bigint inv = modular_inverse(a, b);
    std::cout << "Inverse: " << inv.to_string() << "\n";

    // Возведение в степень по модулю
    bigint d = pow_mod(a, 12345, b);
    std::cout << "pow_mod: " << d.to_string() << "\n";

    // Случайные числа
    bigint r = random_bigint();
    bigint rp = random_prime_bigint();
    std::cout << "Random: " << r.to_string() << "\n";
    std::cout << "Random prime: " << rp.to_string() << "\n";

    return 0;
}
